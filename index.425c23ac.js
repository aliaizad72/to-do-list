let e;class t{static id=0;constructor(e,n,d,o){this.id=t.id++,this.title=e,this.description=n,this.dueDate=d,this.priority=o||"0"}isValid(){return this.title&&this.dueDate}toJSON(){return{id:this.id,title:this.title,description:this.description,dueDate:this.dueDate,priority:this.priority}}}class n{static id=0;constructor(e){this.id=n.id++,this.name=e,this.todos=[]}isValid(){return!!this.name}addTodo(e){this.todos.push(e)}removeTodo(e){this.todos.splice(this.todos.findIndex(t=>t.id==e),1)}toJSON(){return{id:this.id,name:this.name,todos:this.todos.map(e=>JSON.stringify(e))}}static deserialize(e){return Object.assign(JSON.parse(e),{addTodo:function(e){this.todos.push(e)},removeTodo:function(e){this.todos.splice(this.todos.findIndex(t=>t.id==e),1)}})}}const d=document.getElementById("todosubmit"),o=document.getElementById("projectsubmit"),i=document.querySelector("select");function s(e){let t=document.createElement("div"),n=document.createElement("div"),d=document.createElement("h4"),o=document.createElement("p"),i=document.createElement("p"),s=document.createElement("p");t.classList.add(..."flex flex-col m-3 p-3 bg-white border border-gray-200 rounded-lg shadow text-lg gap-1".split(" ")),n.classList.add(..."flex gap-2 items-center".split(" ")),d.textContent=e.title,d.classList.add("font-medium"),o.textContent=e.priority,o.classList.add(..."text-sm bg-red-100".split(" ")),n.appendChild(d),n.appendChild(o),i.textContent=e.description,s.textContent="Due by: "+new Date(e.dueDate).toLocaleString("en-GB",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"}),s.classList.add("text-sm");let c=document.createElement("div");c.classList.add(..."flex gap-2 items-center".split(" "));let a=document.createElement("button"),r=document.createElement("button");a.textContent="Complete",r.textContent="Delete",a.classList.add(..."text-sm hover:text-blue-700".split(" ")),r.classList.add(..."text-sm hover:text-blue-700".split(" ")),a.addEventListener("click",e=>l(e)),r.addEventListener("click",e=>l(e)),c.appendChild(a),c.appendChild(r),t.classList.add("todo"),t.setAttribute("data-todo-id",e.id),t.appendChild(n),t.appendChild(i),t.appendChild(s),t.appendChild(c),document.getElementById("todos").appendChild(t)}function l(e){m().removeTodo(e.target.parentElement.parentElement.dataset.todoId),p(),e.target.parentElement.parentElement.remove()}function c(){document.getElementById("form").classList.toggle("hidden"),document.getElementById("opentaskform").classList.toggle("hidden")}function a(e){e.preventDefault(),document.getElementById("projectform").classList.toggle("hidden"),document.getElementById("openprojectform").classList.toggle("hidden")}function r(){(function(){for(let e of document.getElementById("projects").children)e.setAttribute("selected",!1)})(),e.forEach(e=>{let t=document.createElement("option");t.textContent=e.name,t.value=e.name,t.setAttribute("id",e.name),document.getElementById("projects").appendChild(t)})}function m(){return e.find(e=>e.name==document.getElementById("projects").value)}function u(){[...document.querySelectorAll(".todo")].forEach(e=>e.remove()),function(e){e.todos.forEach(e=>s(e))}(m())}function p(){localStorage.setItem("projects",JSON.stringify(e.map(e=>JSON.stringify(e))))}document.getElementById("opentaskform").addEventListener("click",c),document.getElementById("closeform").addEventListener("click",c),document.getElementById("openprojectform").addEventListener("click",e=>a(e)),document.getElementById("closeprojectform").addEventListener("click",e=>a(e)),d.addEventListener("click",e=>(function(e){e.preventDefault();let n=new t(document.getElementById("title").value,document.getElementById("description").value,document.getElementById("duedate").value,document.getElementById("priority").value),d=m(e);n.isValid()?(d.addTodo(n),p(),s(n)):alert("Please fill in the title and due date!")})(e)),o.addEventListener("click",t=>(function(t){t.preventDefault();let d=new n(document.getElementById("project-name").value);d.isValid()?(e.push(d),p(),function(){let e=document.getElementById("projects");for(;e.lastChild;)e.lastChild.remove()}(),r(),function(e){document.getElementById(e.name).setAttribute("selected",!0)}(d)):alert("Projects must have a name!"),u()})(t)),i.addEventListener("change",()=>u()),document.body.onload=()=>{0===(e=localStorage.getItem("projects")?JSON.parse(localStorage.getItem("projects")).map(e=>n.deserialize(e)):[]).length&&(e.push(new n("Project 0")),function(e){let n=new t("Title","Description","Mon Oct 14 2024 18:54:23 GMT+0800 (Malaysia Time)","1");e.addTodo(n)}(e[0])),r(),u()};
//# sourceMappingURL=index.425c23ac.js.map
